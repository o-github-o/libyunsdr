###############################################################
#
# Change History:
#
# Revision 1.0  2016/7/15 17:18:35  Eric
# Add IQX-6000 support.
#
###############################################################

# Makefile for the pciDriver test programs
CC = gcc
CXX = g++

CFLAGS += -O2 -g
CXXFLAGS += -O2 -g

INCDIR = ../
LDINC += $(addprefix -L ,$(LIBDIR))
LDFLAGS += -lriffa -lpthread -lm

BINDIR = bin

CFLAGS += $(addprefix -I, $(INCDIR)) -msse4.1 -D_GNU_SOURCE
CXXFLAGS += $(addprefix -I,i $(INCDIR))

BINARIES = benchmarkDevice

###############################################################
# Target definitions

.PHONY: all dirs clean

all: dirs $(BINARIES)

dirs:
	$(Q)mkdir -p $(BINDIR)

# Relate all exec names to it exec in the bin dir
$(BINARIES) : % : $(BINDIR)/% ;

# Target for each exec from the object file
$(BINDIR)/benchmarkDevice: main.c yunsdr_api.c device.c cossingen.c
	@echo -e "LD \t$@"
	$(Q)$(CC) $^ $(LDINC) $(LDFLAGS) $(CFLAGS) -o $@ 

clean:
	@echo -e "CLEAN \t$(shell pwd)"
	-$(Q)rm -f $(addprefix $(BINDIR)/,$(BINARIES))
	-$(Q)rm -f $(BINDIR)/benchmarkDevice
